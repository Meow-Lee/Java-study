---
description: 그림과 실습으로 배우는 도커 & 쿠버네티스
---

# 도커란 무엇인가?

## <도커란 무엇인가?>

## 도커는 '데이터 또는 프로그램을 격리시키는' 기능을 제공

* 한마디로 정의하면 위와 같음
* 이 기능은 주로 서버에 사용됨
* 다양한 프로그램과 데이터를 각각 독립된 환경에 격리하는 기능을 제공

### 컨테이너와 도커 엔진

* 예로, 개인용 컴퓨터 또는 서버 상의 환경을 코스트코에서 판매하는 조립형 창고 같은 작은 방으로 분할한다고 했을 때, 작게 쪼갠 독립된 창고에 데이터나 프로그램을 두는 것
* 이 조립형 창고를 컨테이너라 하고, 이 컨테이너를 다루는 기능을 제공하는 소프트웨어가 도커
* 도커를 사용하려면 도커 엔진을 설치해야 하고, 이를 사용해 컨테이너를 생성하고 구동시킬 수 있음

### 컨테이너를 만들려면 이미지가 필요

* 도커 엔진이 있어야 컨테이너를 만들 수 있고, 컨테이너를 만들려면 컨테이너의 빵틀과도 같은 역할을 할 이미지가 필요
* 아파치 컨테이너를 만들려면 아파치 이미지를, MySQL 컨테이너를 만들려면 MySQL 이미지를 사용해야 함
* 컨테이너는 여러 개를 만들 수도 있고, 용량이 허락하는 한 하나의 도커에서 여러 개를 만들 수 있음

### 도커는 리눅스 컴퓨터에서 사용

* 도커를 사용하는 데 몇 가지 제약 사항이 있음
* 우선 종류와 상관없이 리눅스 운영체제가 필요
* 윈도우나 맥에서도 도커를 구동할 수 있지만 이 경우 내부적으로 리눅스가 사용됨
* 또한 컨테이너에서 동작시킬 프로그램도 리눅스용 프로그램
* 이는 도커가 리눅스 운영체제에서 사용하는 것을 전제로 만들어졌기 때문
* 내부적으로 사용되든 리눅스에서 사용하든 어떤 형태로든 리눅스 운영체제가 사용됨

## 데이터나 프로그램을 독립된 환경에 격리해야 하는 이유

* 도커는 주로 서버 환경을 격리하기 위해 사용됨
* 그렇다면 데이터나 프로그램을 독립된 환경에 격리해야 하는 이유는?
* 대부분의 프로그램은 단독으로 동작하지 않고 어떤 실행 환경이나 라이브러리, 다른 프로그램을 이용해 동작
* 소프트웨어 역시 여러 개의 프로그램으로 구성된 경우가 많음 ex) 워드프레스는 MySQL 데이터베이스를 갖추지 않으면 사용할 수 없음
* 이 때문에 프로그램 하나를 업데이트하면 다른 프로그램에도 영향을 미침
* 그렇기에 격리해야함

## 프로그램의 격리란?

* 도커 컨테이너는 다른 컨테이너와 완전히 분리된 환경
* 즉, 컨테이너 안에 들어있는 프로그램은 다른 프로그램과 격리된 상태
* 도커 컨테이너를 사용해 프로그램을 격리하면 여러 프로그램이 한 서버에서 실행되면서 발생하는 문제를 대부분 해결 가능
* 예로, 시스템 A가 어떤 프로그램의 5.0 버전을 사용하고, 시스템 B는 어떤 프로그램의 8.0 버전을 사용해야하는 상황이라면 이들을 세트로 묶어 따로 격리하면 됨
* 즉, 완전히 독립된 환경으로 여러 컨테이너에서 같은 프로그램을 실행할 수 있음

## <서버와 도커>

## 서버의 두 가지 의미

* 서버는 이름 그대로 '어떤 서비스를 제공하는 것'을 가리킴

### 기능적 의미의 서버와 물리적 컴퓨터로서의 서버

* 흔히 들을 수 있는 표현인 **"웹서버에 올려줘"**, **"메일 서버가 죽었어"** 등에서 말하는 서버가 기능적 의미의 서버를 가리킴
* '무슨무슨 서버'라는 말은 '무슨무슨 기능을 제공한다'는 의미로, 웹서버는 웹기능을 제공하고 메일 서버는 메일 기능을 제공
* **"서버에 꽂혀 있던 랜 케이블을 뽑았어"** 같은 상황에서의 서버가 물리적 컴퓨터로서의 서버를 말함
* 개인용 컴퓨터는 개인이 사용하지만 서버는 여러 사람이 원격으로 접근해 사용한다는 점이 다름

### 서버의 기능은 소프트웨어가 제공

* 서버의 기능은 소프트웨어가 제공하는 것으로, 소프트웨어를 설치하면 서버의 기능을 가지게 됨
* 예로, 아파치 같은 웹 서버 소프트웨어를 설치하면 웹 서버 기능을, Sendmail 같은 메일 서버 소프트웨어를 설치하면 메일 서버가 됨

### 서버의 대표적인 예

* 웹서버, 메일 서버, 데이터베이스 서버, 파일 서버 등등

### 서버의 운영체제로는 주로 리눅스가 사용됨

* 우리가 사용하는 개인용 컴퓨터와 서버는 크게 다르지 않음
* 물리적 컴퓨터가 존재하고 그 위에 운영체제가 동작하며 소프트웨어를 설치한다는 점에서 개인용 컴퓨터와 마찬가지
* 서버의 역할 특성상 운영체제는 서버용 운영체제를 사용하는 경우가 많음
* 서버용 운영체제는 리눅스 또는 유닉스 계열을 주로 사용함
* 리눅스 계통에는 레드햇, CentOS, 우분투 등이 유명

## 컨테이너를 이용해 여러 서버 기능을 함께 실행

* 컨테이너 기술을 활용하면 하나의 물리 서버에 여러 개의 웹 서버를 띄울 수 있음
* 또 물리 서버 하나에 여러 개의 웹 서버를 띄우면 그만큼 물리 서버를 줄일 수 있음
* 개발측면에서 이점은 개발환경을 갖추거나 운영 환경으로 쉽게 넘어갈 수 있다는 점
* 이러한 이점은 컨테이너가 그저 격리된 환경이 아니라 쉽게 옮길 수 있다는 특성에서 비롯됨

### 자유로이 옮길 수 있는 컨테이너

* 컨테이너는 자유로이 옮길 수 있음
* 즉, 컨테이너 자체를 옮긴다기보다는 컨테이너의 정보를 내보내기한 다음, 다른 도커 엔진에서 복원하는 형태가 되지만 어쨌든 컨테이너를 어떤 도커 엔진에서 다른 도커 엔진으로 옮기기는 어렵지 않음
* 이러한 특성을 사용하면 똑같은 상태로 튜닝한 컨테이너를 팀원 전원에게 배포해 모두가 동일한 개발환경을 사용할 수 있음
* 도커만 설치되어 있으면 되므로 운영체제가 달라도 이를 신경 쓰지 않고 컨테이너를 옮길 수 있음
* 물리적 환경의 차이, 서버 구성의 차이를 무시할 수 있으므로 운영 서버와 개발 서버의 환경 차이로 인한 문제를 원천적으로 방지할 수 있음
* 또한 환경 전환도 간단히 할 수 있음

## \*\* 도커와 가상화 기술의 차이

* VirtualBox나 VMware 같은 가상화 기술은 가상의 물리 서버를 만드는 것과 같음
* 가상이라는 말은 물리적인 대상을 소프트웨어로 대체했다는 의미
* 즉, 메인보드, CPU 등의 물리적인 부품을 소프트웨어로 구현하는 것
* 실질적으로 물리 서버와 동등한 것이므로 당연히 운영체제도 아무 것이나 설치할 수 있고, 그 위에서 어떤 소프트웨어를 구동해도 무방함
* 이와 달리 도커는 컨테이너에서 리눅스가 동작하는 것처럼 보이지만 실제 리눅스가 동작하는 것은 아님
* 운영체제의 기능 중 일부를 호스트 역할을 하는 물리 서버에 맡겨 부담을 덜어 둔 형태
* 즉, 컨테이너는 운영체제의 일부 기능을 호스트 컴퓨터에 의존하기 때문에 물리 서버에도 리눅스 기능이 필요하며, 컨테이너의 내용도 리눅스 운영체제가 될 수밖에 없음

### 도커와 AWS EC2 차이

* 도커의 컨테이너와 비슷한 '인스턴스' 개념이 있음
* EC2 역시 가상화 기술로, 각각의 인스턴스가 완전히 독립된 컴퓨터처럼 동작
* 따라서 이들의 관계는 VirtualBox와 도커의 관계와 같음
* 다만 인스턴스는 컨테이너와 마찬가지로 AMI라는 이미지로부터 생성하므로 인스턴스를 배포하는 방법은 도커와 비슷

### 도커와 호스팅 서비스

* AWS ECS가 이에 해당하므로 이들 서비스를 사용하면 별도로 가상 서버를 만들지 않아도 컨테이너 이미지를 그대로 실행할 수 있음
